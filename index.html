<!DOCTYPE html>

<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorteio de Duplas</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide-react/0.263.1/lucide-react.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

```
<script type="text/babel">
    const { useState, useEffect, useRef } = React;
    const { Users, Shuffle, Plus, Trash2, RotateCcw, Upload, FileText } = lucide;

    const SorteioDuplas = () => {
        const [participantes, setParticipantes] = useState([]);
        const [participantesSorteados, setParticipantesSorteados] = useState([]);
        const [novoParticipante, setNovoParticipante] = useState('');
        const [duplaAtual, setDuplaAtual] = useState(null);
        const [historicoDuplas, setHistoricoDuplas] = useState([]);
        const [rodadaAtual, setRodadaAtual] = useState(1);
        const [isAnimating, setIsAnimating] = useState(false);
        const fileInputRef = useRef(null);

        // Fun√ß√£o para adicionar participante
        const adicionarParticipante = () => {
            if (novoParticipante.trim() && !participantes.includes(novoParticipante.trim())) {
                setParticipantes([...participantes, novoParticipante.trim()]);
                setNovoParticipante('');
            }
        };

        // Fun√ß√£o para importar lista de arquivo
        const importarLista = (event) => {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                const text = e.target.result;
                const nomes = text
                    .split(/[\n,;]/)
                    .map(nome => nome.trim())
                    .filter(nome => nome.length > 0);
                
                const nomesUnicos = [...new Set([...participantes, ...nomes])];
                setParticipantes(nomesUnicos);
            };
            reader.readAsText(file);
            
            // Reset do input para permitir importar o mesmo arquivo novamente
            event.target.value = '';
        };

        // Fun√ß√£o para remover participante
        const removerParticipante = (nome) => {
            setParticipantes(participantes.filter(p => p !== nome));
        };

        // Fun√ß√£o para sortear dupla
        const sortearDupla = () => {
            if (participantes.length < 2) return;

            setIsAnimating(true);
            
            setTimeout(() => {
                const participantesDisponiveis = [...participantes];
                const pessoa1 = participantesDisponiveis[Math.floor(Math.random() * participantesDisponiveis.length)];
                const restantes = participantesDisponiveis.filter(p => p !== pessoa1);
                const pessoa2 = restantes[Math.floor(Math.random() * restantes.length)];
                
                const novaDupla = { pessoa1, pessoa2, rodada: rodadaAtual };
                setDuplaAtual(novaDupla);
                setHistoricoDuplas([...historicoDuplas, novaDupla]);
                
                // Remove as pessoas sorteadas da lista principal
                const novosParticipantes = participantes.filter(p => p !== pessoa1 && p !== pessoa2);
                setParticipantes(novosParticipantes);
                
                // Adiciona √†s pessoas j√° sorteadas
                setParticipantesSorteados([...participantesSorteados, pessoa1, pessoa2]);
                
                setIsAnimating(false);
            }, 1500);
        };

        // Fun√ß√£o para verificar se precisa de nova rodada
        const verificarNovaRodada = () => {
            if (participantes.length === 0 && participantesSorteados.length > 0) {
                if (participantesSorteados.length < 4) {
                    // √öltima rodada - pegar pessoas aleat√≥rias dos j√° sorteados
                    const pessoasParaUltimaRodada = [...participantesSorteados];
                    while (pessoasParaUltimaRodada.length < 4 && historicoDuplas.length > 0) {
                        const duplaAnterior = historicoDuplas[Math.floor(Math.random() * historicoDuplas.length)];
                        if (!pessoasParaUltimaRodada.includes(duplaAnterior.pessoa1)) {
                            pessoasParaUltimaRodada.push(duplaAnterior.pessoa1);
                        }
                        if (!pessoasParaUltimaRodada.includes(duplaAnterior.pessoa2) && pessoasParaUltimaRodada.length < 4) {
                            pessoasParaUltimaRodada.push(duplaAnterior.pessoa2);
                        }
                        break;
                    }
                    setParticipantes(pessoasParaUltimaRodada.slice(0, 4));
                } else {
                    // Nova rodada normal
                    setParticipantes([...participantesSorteados]);
                }
                setParticipantesSorteados([]);
                setRodadaAtual(rodadaAtual + 1);
                setDuplaAtual(null);
            }
        };

        // Fun√ß√£o para resetar tudo
        const resetarTudo = () => {
            setParticipantes([]);
            setParticipantesSorteados([]);
            setDuplaAtual(null);
            setHistoricoDuplas([]);
            setRodadaAtual(1);
            setIsAnimating(false);
        };

        // Fun√ß√£o para adicionar participantes exemplo
        const adicionarExemplo = () => {
            const exemplos = ['Ana', 'Bruno', 'Carlos', 'Diana', 'Eduardo', 'Fernanda', 'Gabriel', 'Helena'];
            setParticipantes(exemplos);
        };

        useEffect(() => {
            verificarNovaRodada();
        }, [participantes, participantesSorteados]);

        return (
            <div className="min-h-screen bg-gradient-to-br from-blue-600 via-blue-500 to-cyan-400 p-4">
                <div className="max-w-4xl mx-auto">
                    {/* Header */}
                    <div className="text-center mb-8">
                        <h1 className="text-4xl md:text-5xl font-bold text-white mb-2 flex items-center justify-center gap-3">
                            <Users className="text-white" size={40} />
                            Sorteio de Duplas
                        </h1>
                        <p className="text-white/80 text-lg">Rodada {rodadaAtual}</p>
                    </div>

                    {/* Adicionar Participantes */}
                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                        <h2 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                            <Plus size={24} />
                            Adicionar Participantes
                        </h2>
                        
                        <div className="flex flex-col sm:flex-row gap-3 mb-4">
                            <input
                                type="text"
                                value={novoParticipante}
                                onChange={(e) => setNovoParticipante(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && adicionarParticipante()}
                                placeholder="Digite o nome do participante"
                                className="flex-1 px-4 py-3 rounded-lg border border-white/30 bg-white/20 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50"
                            />
                            <button
                                onClick={adicionarParticipante}
                                className="px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors flex items-center gap-2"
                            >
                                <Plus size={20} />
                                Adicionar
                            </button>
                        </div>

                        <div className="flex flex-col sm:flex-row gap-3 mb-4">
                            <input
                                type="file"
                                ref={fileInputRef}
                                onChange={importarLista}
                                accept=".txt,.csv"
                                className="hidden"
                            />
                            <button
                                onClick={() => fileInputRef.current?.click()}
                                className="px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors flex items-center gap-2"
                            >
                                <Upload size={20} />
                                Importar Lista
                            </button>
                            <button
                                onClick={adicionarExemplo}
                                className="px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors flex items-center gap-2"
                            >
                                <FileText size={20} />
                                Adicionar Exemplo
                            </button>
                        </div>

                        <div className="text-white/80 text-sm space-y-1">
                            <p>üí° Dicas para importar:</p>
                            <p>‚Ä¢ Arquivos .txt ou .csv com nomes separados por linha, v√≠rgula ou ponto e v√≠rgula</p>
                            <p>‚Ä¢ Exemplo: "Jo√£o, Maria, Pedro" ou cada nome em uma linha</p>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        {/* Lista de Participantes */}
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                            <h2 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                                <Users size={24} />
                                Participantes Dispon√≠veis ({participantes.length})
                            </h2>
                            
                            <div className="space-y-2 max-h-60 overflow-y-auto">
                                {participantes.length === 0 ? (
                                    <p className="text-white/70 text-center py-4">Nenhum participante dispon√≠vel</p>
                                ) : (
                                    participantes.map((nome, index) => (
                                        <div key={index} className="flex items-center justify-between bg-white/20 rounded-lg p-3">
                                            <span className="text-white font-medium">{nome}</span>
                                            <button
                                                onClick={() => removerParticipante(nome)}
                                                className="text-red-300 hover:text-red-100 transition-colors"
                                            >
                                                <Trash2 size={18} />
                                            </button>
                                        </div>
                                    ))
                                )}
                            </div>
                        </div>

                        {/* Participantes Sorteados */}
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                            <h2 className="text-2xl font-bold text-white mb-4">
                                J√° Sorteados ({participantesSorteados.length})
                            </h2>
                            
                            <div className="space-y-2 max-h-60 overflow-y-auto">
                                {participantesSorteados.length === 0 ? (
                                    <p className="text-white/70 text-center py-4">Nenhum participante sorteado ainda</p>
                                ) : (
                                    participantesSorteados.map((nome, index) => (
                                        <div key={index} className="bg-white/20 rounded-lg p-3">
                                            <span className="text-white font-medium">{nome}</span>
                                        </div>
                                    ))
                                )}
                            </div>
                        </div>
                    </div>

                    {/* √Årea do Sorteio */}
                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                        <div className="text-center">
                            <button
                                onClick={sortearDupla}
                                disabled={participantes.length < 2 || isAnimating}
                                className="mb-6 px-8 py-4 bg-yellow-500 hover:bg-yellow-600 disabled:bg-gray-500 text-white rounded-2xl font-bold text-xl transition-all transform hover:scale-105 disabled:cursor-not-allowed flex items-center gap-3 mx-auto"
                            >
                                {isAnimating ? (
                                    <>
                                        <div className="animate-spin rounded-full h-6 w-6 border-b-2 border-white"></div>
                                        Sorteando...
                                    </>
                                ) : (
                                    <>
                                        <Shuffle size={24} />
                                        Sortear Dupla
                                    </>
                                )}
                            </button>

                            {duplaAtual && !isAnimating && (
                                <div className="bg-white/20 rounded-2xl p-6 animate-pulse">
                                    <h3 className="text-2xl font-bold text-white mb-4">üéâ Dupla Sorteada!</h3>
                                    <div className="flex flex-col sm:flex-row items-center justify-center gap-4">
                                        <div className="bg-blue-500 text-white px-6 py-3 rounded-xl font-bold text-lg">
                                            {duplaAtual.pessoa1}
                                        </div>
                                        <div className="text-3xl">üí´</div>
                                        <div className="bg-pink-500 text-white px-6 py-3 rounded-xl font-bold text-lg">
                                            {duplaAtual.pessoa2}
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Hist√≥rico */}
                    {historicoDuplas.length > 0 && (
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                            <h2 className="text-2xl font-bold text-white mb-4">Hist√≥rico de Duplas</h2>
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto">
                                {historicoDuplas.map((dupla, index) => (
                                    <div key={index} className="bg-white/20 rounded-lg p-3">
                                        <div className="text-xs text-white/70 mb-1">Rodada {dupla.rodada}</div>
                                        <div className="text-white font-medium">
                                            {dupla.pessoa1} & {dupla.pessoa2}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* Bot√£o Reset */}
                    <div className="text-center">
                        <button
                            onClick={resetarTudo}
                            className="px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors flex items-center gap-2 mx-auto"
                        >
                            <RotateCcw size={20} />
                            Resetar Tudo
                        </button>
                    </div>
                </div>
            </div>
        );
    };

    ReactDOM.render(<SorteioDuplas />, document.getElementById('root'));
</script>
```

</body>
</html>
