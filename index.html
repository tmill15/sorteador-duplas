<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sorteio de Duplas</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // Ícones Lucide como componentes JSX
    const Users = () => (
      <svg xmlns="http://www.w3.org/2000/svg" className="text-white" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M5 20v-2a4 4 0 0 1 4-4h6a4 4 0 0 1 4 4v2"/>
        <circle cx="12" cy="10" r="4"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        <path d="M8 3.13a4 4 0 0 0 0 7.75"/>
      </svg>
    );

    const Shuffle = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" className="text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
        <path d="M16 3h5v5" />
        <path d="M4 20l5-5 5 5" />
        <path d="M20 3l-7.5 7.5" />
        <path d="M16 21h5v-5" />
      </svg>
    );

    const Plus = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" className="text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
        <line x1="12" y1="5" x2="12" y2="19" />
        <line x1="5" y1="12" x2="19" y2="12" />
      </svg>
    );

    const Trash2 = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
        <polyline points="3 6 5 6 21 6" />
        <path d="M19 6l-1.5 14H6.5L5 6" />
        <path d="M10 11v6" />
        <path d="M14 11v6" />
        <path d="M9 6V4h6v2" />
      </svg>
    );

    const RotateCcw = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
        <polyline points="1 4 1 10 7 10" />
        <path d="M3.51 15a9 9 0 1 0 .49-9.36L1 10" />
      </svg>
    );

    const Upload = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
        <polyline points="17 8 12 3 7 8" />
        <line x1="12" y1="3" x2="12" y2="15" />
      </svg>
    );

    const FileText = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
        <polyline points="14 2 14 8 20 8" />
        <line x1="16" y1="13" x2="8" y2="13" />
        <line x1="16" y1="17" x2="8" y2="17" />
        <line x1="10" y1="9" x2="8" y2="9" />
      </svg>
    );

    // Componente principal
    const SorteioDuplas = () => {
      const [participantes, setParticipantes] = useState([]);
      const [participantesSorteados, setParticipantesSorteados] = useState([]);
      const [novoParticipante, setNovoParticipante] = useState('');
      const [duplaAtual, setDuplaAtual] = useState(null);
      const [historicoDuplas, setHistoricoDuplas] = useState([]);
      const [rodadaAtual, setRodadaAtual] = useState(1);
      const [isAnimating, setIsAnimating] = useState(false);
      const fileInputRef = useRef(null);

      const adicionarParticipante = () => {
        if (novoParticipante.trim() && !participantes.includes(novoParticipante.trim())) {
          setParticipantes([...participantes, novoParticipante.trim()]);
          setNovoParticipante('');
        }
      };

      const importarLista = (event) => {
        const file = event.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
          const text = e.target.result;
          const nomes = text.split(/[
,;]/).map(nome => nome.trim()).filter(nome => nome.length > 0);
          const nomesUnicos = [...new Set([...participantes, ...nomes])];
          setParticipantes(nomesUnicos);
        };
        reader.readAsText(file);
        event.target.value = '';
      };

      const removerParticipante = (nome) => {
        setParticipantes(participantes.filter(p => p !== nome));
      };

      const sortearDupla = () => {
        if (participantes.length < 2) return;
        setIsAnimating(true);
        setTimeout(() => {
          const participantesDisponiveis = [...participantes];
          const pessoa1 = participantesDisponiveis[Math.floor(Math.random() * participantesDisponiveis.length)];
          const restantes = participantesDisponiveis.filter(p => p !== pessoa1);
          const pessoa2 = restantes[Math.floor(Math.random() * restantes.length)];
          const novaDupla = { pessoa1, pessoa2, rodada: rodadaAtual };
          setDuplaAtual(novaDupla);
          setHistoricoDuplas([...historicoDuplas, novaDupla]);
          setParticipantes(participantes.filter(p => p !== pessoa1 && p !== pessoa2));
          setParticipantesSorteados([...participantesSorteados, pessoa1, pessoa2]);
          setIsAnimating(false);
        }, 1500);
      };

      const verificarNovaRodada = () => {
        if (participantes.length === 0 && participantesSorteados.length > 0) {
          if (participantesSorteados.length < 4) {
            const pessoasParaUltimaRodada = [...participantesSorteados];
            while (pessoasParaUltimaRodada.length < 4 && historicoDuplas.length > 0) {
              const duplaAnterior = historicoDuplas[Math.floor(Math.random() * historicoDuplas.length)];
              if (!pessoasParaUltimaRodada.includes(duplaAnterior.pessoa1)) {
                pessoasParaUltimaRodada.push(duplaAnterior.pessoa1);
              }
              if (!pessoasParaUltimaRodada.includes(duplaAnterior.pessoa2) && pessoasParaUltimaRodada.length < 4) {
                persoasParaUltimaRodada.push(duplaAnterior.pessoa2);
              }
              break;
            }
            setParticipantes(pessoasParaUltimaRodada.slice(0, 4));
          } else {
            setParticipantes([...participantesSorteados]);
          }
          setParticipantesSorteados([]);
          setRodadaAtual(rodadaAtual + 1);
          setDuplaAtual(null);
        }
      };

      const resetarTudo = () => {
        setParticipantes([]);
        setParticipantesSorteados([]);
        setDuplaAtual(null);
        setHistoricoDuplas([]);
        setRodadaAtual(1);
        setIsAnimating(false);
      };

      const adicionarExemplo = () => {
        const exemplos = ['Ana', 'Bruno', 'Carlos', 'Diana', 'Eduardo', 'Fernanda', 'Gabriel', 'Helena'];
        setParticipantes(exemplos);
      };

      useEffect(() => {
        verificarNovaRodada();
      }, [participantes, participantesSorteados]);

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-600 via-blue-500 to-cyan-400 p-4">
          <div className="max-w-4xl mx-auto">
            <div className="text-center mb-8">
              <h1 className="text-4xl md:text-5xl font-bold text-white mb-2 flex items-center justify-center gap-3">
                <Users />
                Sorteio de Duplas
              </h1>
              <p className="text-white/80 text-lg">Rodada {rodadaAtual}</p>
            </div>
  <!-- Remaining code truncated for brevity -->
</script>
</body>
</html>
